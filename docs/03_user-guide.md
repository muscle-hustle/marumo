# marumo ユーザーガイド

## 1. はじめに

**marumo**（まるも）は、サーバーに画像を送信せず、ブラウザ内で安全に顔にモザイク加工を施すことができるWebアプリケーションです。

### アプリ名の由来

「**まる**」で囲むだけで簡単に「**モ**」ザイクをかける、というコンセプトから名付けられました。手軽に顔を保護できるツールです。

### 1.1 主な特徴
- **プライバシー保護**: 画像は一切サーバーに送信されません
- **簡単操作**: 直感的なUIで誰でも簡単に使用できます
- **高速処理**: 3秒以内に処理が完了します
- **多様な加工**: モザイク、ぼかし、スタンプの3種類から選択可能

### 1.2 対応環境
- **ブラウザ**: Chrome、Safari、Edge（最新版）
- **デバイス**: PC、タブレット、スマートフォン
- **画像形式**: JPEG、PNG、WebP（写真用途に特化）
- **画像サイズ**: 最大4K（3840×2160ピクセル）、ファイルサイズ10MB以下

## 2. 基本的な使い方

### 2.1 画像の選択

1. アプリを開くと、画像選択エリアが表示されます
2. 「画像を選択」ボタンをクリック（またはタップ）します
3. ファイル選択ダイアログから、加工したい画像を選択します

**注意事項**:
- 対応形式: JPEG、PNG、WebP（写真用途に特化）
- 最大ファイルサイズ: 10MB
- 最大画像サイズ: 4K（3840×2160ピクセル）

### 2.2 顔検出モードの選択

アプリを開くと、初期状態で自動モードが選択されています。以下の2つのモードから選択できます。

#### 自動モード
- 画像を選択すると、自動的に顔を検出します
- 検出された顔に自動的にモザイク加工を適用します（デフォルトはモザイク、加工種類は変更可能）
- **推奨**: 複数の顔を一度に処理したい場合

#### 手動モード
- 投げ縄ツールで範囲を選択します
- 選択範囲内の顔を検出します
- **推奨**: 特定の顔だけを処理したい場合

**手動モードの種類**:
- **モザイクする顔を選択**: 選択範囲内の顔にモザイクを適用
- **モザイクしない顔を選択**: 選択範囲外の顔にモザイクを適用

### 2.3 加工種類の選択

以下の3種類から選択できます。

#### モザイク 🔲
- 顔をピクセル化して見えなくします
- 最も一般的な加工方法です

#### ぼかし 🌫️
- 顔をぼかして見えにくくします
- 自然な見た目を保ちたい場合に適しています

#### スタンプ 😀
- 顔の上に絵文字スタンプを配置します（5種類から選択可能）
- 楽しい雰囲気にしたい場合に適しています

### 2.4 画像のダウンロード

1. 加工が完了すると、「ダウンロード」ボタンが有効になります
2. 「ダウンロード」ボタンをクリック（またはタップ）します
3. 加工済み画像がダウンロードされます

**注意事項**:
- ダウンロード形式は元の画像形式を維持します
- 画像品質も可能な限り元の品質を維持します

## 3. 詳細な使い方

### 3.1 自動モードの使い方

1. 画像を選択します（自動モードが初期状態で選択されています）
2. 画像を選択すると、自動的に顔が検出され、モザイク加工が適用されます
3. 加工種類（モザイク/ぼかし/スタンプ）を変更すると、自動的に加工が再適用されます
4. スタンプを選択した場合は、スタンプの種類を選択できます
5. 「ダウンロード」ボタンで保存します

**コツ**:
- 顔がはっきり写っている画像ほど検出精度が高くなります
- 検出されなかった顔は、手動モードで追加できます

### 3.2 手動モードの使い方

#### モザイクする顔を選択する場合

1. 画像を選択します
2. 「手動モード」を選択します
3. 「モザイクする顔を選択」を選択します
4. 投げ縄ツールで、モザイクしたい顔の周りを囲みます
   - **PC**: マウスでドラッグして範囲を描画
   - **スマートフォン/タブレット**: 指でなぞって範囲を描画
5. 範囲を閉じると、自動的に顔が検出されます
6. 加工種類を選択します
7. 加工が適用されます
8. 必要に応じて、他の顔も同様に処理します
9. 「ダウンロード」ボタンで保存します

#### モザイクしない顔を選択する場合

1. 画像を選択します
2. 「手動モード」を選択します
3. 「モザイクしない顔を選択」を選択します
4. 投げ縄ツールで、モザイクを**かけない**顔の周りを囲みます
5. 範囲を閉じると、自動的に顔が検出されます
6. 選択範囲**外**のすべての顔にモザイクが適用されます
7. 加工種類を選択します
8. 加工が適用されます
9. 「ダウンロード」ボタンで保存します

**コツ**:
- 投げ縄ツールは自由な形状で描画できます
- 顔全体が範囲内に含まれるように選択してください
- 複数の顔を一度に選択することもできます（範囲内のすべての顔が検出されます）

**操作パネルについて**:
- PC/タブレット: 操作パネルは画像の上に重ねて表示されます
- スマートフォン: 操作パネルは画像の下に表示され、操作しやすくなっています

### 3.3 手動モードの操作パネル

手動モードでは、画像の近くに操作パネルが表示されます。以下の操作が可能です：

- **自動選択**: 画像内のすべての顔を自動検出します
- **範囲選択/範囲除外**: トグルスイッチで切り替え、モザイクする顔を選択するか、除外する顔を選択します
- **リセット**: すべての検出結果と加工をリセットします
- **戻す/進む**: 操作履歴を元に戻したり、やり直したりできます（アイコンボタン）

**注意事項**:
- 現在のバージョンでは、加工の強度調整はできません（デフォルト設定で最適化されています）
- デフォルト設定でも十分に効果的な加工が可能です

## 4. よくある質問（FAQ）

### Q1. 顔が検出されません
**A**: 以下の点を確認してください。
- 顔がはっきり写っているか
- 顔が小さすぎないか（画面の1/10以上推奨）
- 手動モードで範囲を選択してみてください

### Q2. 誤って顔以外が検出されました
**A**: 手動モードを使用して、正確に顔の範囲を選択してください。自動モードは過剰検出を抑制する設定になっていますが、完全ではありません。

### Q3. 処理に時間がかかります
**A**: 以下の場合に処理時間が長くなることがあります。
- 画像サイズが大きい場合（4K画像など）
- 検出される顔の数が多い場合
- 古いデバイスやブラウザを使用している場合

通常は3秒以内に完了しますが、大きな画像の場合は少し時間がかかる場合があります。

### Q4. スマートフォンで使いにくいです
**A**: スマートフォンでの操作のコツ：
- 画面を横向きにすると操作しやすくなります
- 投げ縄ツールは指でゆっくりと描画してください
- ピンチズームで画像を拡大してから選択すると精度が上がります

### Q5. ダウンロードした画像の品質が悪いです
**A**: 元の画像形式と品質を可能な限り維持していますが、以下の場合に品質が低下することがあります。
- JPEG形式の場合、圧縮による劣化が発生する可能性があります
- 元の画像の品質が低い場合

### Q6. 複数の画像を一度に処理できますか
**A**: 現在のバージョンでは、1枚ずつ処理する必要があります。複数の画像を処理する場合は、それぞれ個別に処理してください。

### Q7. 画像はどこに保存されますか
**A**: 画像は一切サーバーに送信されず、ブラウザのメモリ上のみに保持されます。ページを閉じると、すべてのデータは削除されます。

### Q8. 処理した画像の履歴は残りますか
**A**: 現在のバージョンでは、処理履歴は保存されません。ページをリロードすると、すべてのデータはリセットされます。

## 5. トラブルシューティング

### 5.1 画像が読み込めない

**症状**: 画像を選択しても表示されない

**対処法**:
1. 画像形式が対応形式か確認してください
2. ファイルサイズが10MB以下か確認してください
3. 画像が破損していないか確認してください
4. ブラウザを最新版に更新してください

**注意**: エラーメッセージは画面下部に表示されます。エラーが表示された場合は、メッセージの内容を確認してください。

### 5.2 顔検出が動作しない

**症状**: 「顔を検出」ボタンを押しても何も起こらない

**対処法**:
1. ページをリロードしてください
2. ブラウザのコンソールにエラーが表示されていないか確認してください
3. 別のブラウザで試してください
4. 画像に顔が写っているか確認してください

### 5.3 ダウンロードができない

**症状**: 「ダウンロード」ボタンを押してもダウンロードされない

**対処法**:
1. ブラウザのダウンロード設定を確認してください
2. ポップアップブロッカーが有効になっていないか確認してください
3. 別のブラウザで試してください

### 5.4 処理が途中で止まる

**症状**: 処理中にエラーが発生する、またはブラウザがクラッシュする

**対処法**:
1. 画像サイズが大きすぎる可能性があります。画像を小さくしてから再度お試しください
2. ブラウザのメモリが不足している可能性があります。他のタブを閉じてから再度お試しください
3. ブラウザを最新版に更新してください

## 6. プライバシーについて

### 6.1 データの取り扱い
- **画像データ**: 一切サーバーに送信されません。すべての処理はブラウザ内で完結します
- **個人情報**: 個人情報は一切収集しません
- **Cookie**: Cookieは使用しません
- **トラッキング**: ユーザーの行動を追跡しません

### 6.2 セキュリティ
- すべての処理はクライアント側（ブラウザ）で実行されます
- インターネット接続がなくても、一度読み込んだアプリは動作します（オフライン対応）

## 7. サポート

### 7.1 バグ報告
不具合を発見した場合は、GitHubのIssuesで報告してください。

### 7.2 機能要望
新機能の要望がある場合は、GitHubのIssuesで提案してください。

### 7.3 お問い合わせ
その他のお問い合わせも、GitHubのIssuesで受け付けています。

## 8. 更新履歴

### バージョン 1.0.0
- 初回リリース
- 自動/手動顔検出機能
- モザイク/ぼかし/スタンプ加工機能
- 画像ダウンロード機能

